(window.webpackJsonp=window.webpackJsonp||[]).push([[500],{850:function(s,a,t){"use strict";t.r(a);var e=t(0),n=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"jvm调优"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jvm调优"}},[s._v("#")]),s._v(" JVM调优")]),s._v(" "),a("h2",{attrs:{id:"top"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#top"}},[s._v("#")]),s._v(" top")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("top")]),s._v(" - 01:30:52 up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("54")]),s._v(" days, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(":11,  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" user,  load average: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.01")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.05")]),s._v("\nTasks:  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("91")]),s._v(" total,   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" running,  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("89")]),s._v(" sleeping,   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" stopped,   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" zombie\n%Cpu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.7")]),s._v(" us,  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.7")]),s._v(" sy,  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(" ni, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("98.7")]),s._v(" id,  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(" wa,  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(" hi,  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(" si,  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(" st\nKiB Mem "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1882008")]),s._v(" total,    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("79456")]),s._v(" free,  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1384372")]),s._v(" used,   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("418180")]),s._v(" buff/cache\nKiB Swap:        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" total,        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" free,        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" used.   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("342880")]),s._v(" avail Mem \n\n  PID "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v("      PR  NI    VIRT    RES    SHR S %CPU %MEM     TIME+ COMMAND                 \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20670")]),s._v(" root      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("677196")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13616")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1664")]),s._v(" S  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.7")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.7")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(":53.70 barad_agent     \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("31725")]),s._v(" root      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("987084")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("43684")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7420")]),s._v(" S  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.7")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.3")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("138")]),s._v(":18.49 YDService\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("ul",[a("li",[a("p",[s._v("第一行显示的内容：当前时间、系统运行时间以及正在登录用户数")])]),s._v(" "),a("li",[a("p",[s._v("load average 后的三个数字，依次表示过去 1 分钟、5 分钟、15 分钟的平均负载（Load Average）。 平均负载是指单位时间内，系统处于可运行状态（正在使用 CPU 或者正在等待 CPU 的进程，R 状态）和不可中断状态（D 状态）的平均进程数，也就是平均活跃进程数， CPU 平均负载和 CPU 使用率并没有直接关系。")])]),s._v(" "),a("li",[a("p",[s._v("第三行的内容表示 CPU 利用率，每一列的含义可以使用 man 查看。CPU 使用率 体现了单位时间内 CPU 使用情况的统计，以百分比的方式展示。计算方式为：CPU 利 用率 = 1 - （CPU 空闲时间）/ CPU 总的时间。需要注意的是，通过性能分析工具得 到的 CPU 的利用率其实是某个采样时间内的 CPU 平均值。注：top 工具显示的的 CPU 利用率是把所有 CPU 核的数值加起来的，即 8 核 CPU 的利用率最大可以到达 800%（可以用 htop 等更新一些的工具代替 top）。")])])]),s._v(" "),a("h2",{attrs:{id:"vmstat"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vmstat"}},[s._v("#")]),s._v(" vmstat")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[root]# vmstat 1\nprocs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----\n r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st\n 4  0      0  94620  44620 360036    0    0    39    43    2    4  1  1 98  0  0\n 0  0      0  90552  44628 361616    0    0  1572    84  573 1231  3  1 95  1  0\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("上表的 cs（context switch） 就是每秒上下文切换的次数，按照不同场景，CPU 上下文切换还可以分为中断上下文切换、线程上下文切换和进程上下文切换三种，但是无论是哪一种，过多的上下文切换，都会把 CPU 时间消耗在寄存器、内核栈以及虚拟内存等数据的保存和恢复上，从而缩短进程真正运行的时间，导致系统的整体性能大幅 下降。vmstat 的输出中 us、sy 分别用户态和内核态的 CPU 利用率，这两个值也非常 具有参考意义。")]),s._v(" "),a("h2",{attrs:{id:"free"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#free"}},[s._v("#")]),s._v(" free")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# free -h")]),s._v("\n              total        used        "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("free")]),s._v("      shared  buff/cache   available\nMem:           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".8G        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".3G         93M        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".0M        392M        334M\nSwap:            0B          0B          0B\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);
<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Spring6 - AOP | KNOTE</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="//at.alicdn.com/t/font_3114978_qe0b39no76.css">
    <script src="https://cdn.staticfile.org/twikoo/1.6.7/twikoo.all.min.js"></script>
    <script>var _hmt = _hmt || [];
          (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?267c5680c2ffb468ca29c45ffe6801da"; 
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
          })();
          </script>
    <meta name="description" content="学习Java, Web, 框架, 微服务, 工具, 前端等相关知识, 记录生活和技术路程, 同时分享编程技巧。">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <meta name="keywords" content="学习Java、Web、框架、微服务、工具、前端等相关知识, 记录生活和技术路程。">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.ef7cd65c.css" as="style"><link rel="preload" href="/assets/js/app.be13efeb.js" as="script"><link rel="preload" href="/assets/js/2.6721fee8.js" as="script"><link rel="preload" href="/assets/js/236.48827a8e.js" as="script"><link rel="preload" href="/assets/js/4.7df05356.js" as="script"><link rel="prefetch" href="/assets/js/10.9fc0ad5e.js"><link rel="prefetch" href="/assets/js/100.445a953f.js"><link rel="prefetch" href="/assets/js/101.50f3f636.js"><link rel="prefetch" href="/assets/js/102.ea01a0a9.js"><link rel="prefetch" href="/assets/js/103.48c80b71.js"><link rel="prefetch" href="/assets/js/104.c1304567.js"><link rel="prefetch" href="/assets/js/105.21f8b504.js"><link rel="prefetch" href="/assets/js/106.bc15f6b1.js"><link rel="prefetch" href="/assets/js/107.369451a9.js"><link rel="prefetch" href="/assets/js/108.ad4f8dbb.js"><link rel="prefetch" href="/assets/js/109.4c0ac598.js"><link rel="prefetch" href="/assets/js/11.571f9844.js"><link rel="prefetch" href="/assets/js/110.1e132789.js"><link rel="prefetch" href="/assets/js/111.3e69498d.js"><link rel="prefetch" href="/assets/js/112.cb20729c.js"><link rel="prefetch" href="/assets/js/113.2f080aa8.js"><link rel="prefetch" href="/assets/js/114.99d37d0a.js"><link rel="prefetch" href="/assets/js/115.aa87050b.js"><link rel="prefetch" href="/assets/js/116.b5fa1b2e.js"><link rel="prefetch" href="/assets/js/117.01d3ca92.js"><link rel="prefetch" href="/assets/js/118.efbecdc5.js"><link rel="prefetch" href="/assets/js/119.8ad5c904.js"><link rel="prefetch" href="/assets/js/12.a3002f91.js"><link rel="prefetch" href="/assets/js/120.f9d2779e.js"><link rel="prefetch" href="/assets/js/121.77249b18.js"><link rel="prefetch" href="/assets/js/122.c9167ca2.js"><link rel="prefetch" href="/assets/js/123.70789fe4.js"><link rel="prefetch" href="/assets/js/124.e1f1ba48.js"><link rel="prefetch" href="/assets/js/125.05e8e963.js"><link rel="prefetch" href="/assets/js/126.87fa90c1.js"><link rel="prefetch" href="/assets/js/127.d36d7dfd.js"><link rel="prefetch" href="/assets/js/128.729d369a.js"><link rel="prefetch" href="/assets/js/129.bdd0e080.js"><link rel="prefetch" href="/assets/js/13.d769b73a.js"><link rel="prefetch" href="/assets/js/130.17b3a98a.js"><link rel="prefetch" href="/assets/js/131.6462d2dd.js"><link rel="prefetch" href="/assets/js/132.9f77f2b3.js"><link rel="prefetch" href="/assets/js/133.b11dacc2.js"><link rel="prefetch" href="/assets/js/134.f94bc9ab.js"><link rel="prefetch" href="/assets/js/135.592b15b0.js"><link rel="prefetch" href="/assets/js/136.358ac083.js"><link rel="prefetch" href="/assets/js/137.8e5be7ac.js"><link rel="prefetch" href="/assets/js/138.a1358061.js"><link rel="prefetch" href="/assets/js/139.5f959387.js"><link rel="prefetch" href="/assets/js/14.96b83c4a.js"><link rel="prefetch" href="/assets/js/140.e034ec3e.js"><link rel="prefetch" href="/assets/js/141.cf28f196.js"><link rel="prefetch" href="/assets/js/142.005c6885.js"><link rel="prefetch" href="/assets/js/143.92dbb563.js"><link rel="prefetch" href="/assets/js/144.263bc914.js"><link rel="prefetch" href="/assets/js/145.ba7404c7.js"><link rel="prefetch" href="/assets/js/146.8c5c427e.js"><link rel="prefetch" href="/assets/js/147.15f5203d.js"><link rel="prefetch" href="/assets/js/148.b2294b7e.js"><link rel="prefetch" href="/assets/js/149.29566afd.js"><link rel="prefetch" href="/assets/js/15.456873d3.js"><link rel="prefetch" href="/assets/js/150.e513c541.js"><link rel="prefetch" href="/assets/js/151.feac0309.js"><link rel="prefetch" href="/assets/js/152.6b80af4d.js"><link rel="prefetch" href="/assets/js/153.663db95c.js"><link rel="prefetch" href="/assets/js/154.027f8e44.js"><link rel="prefetch" href="/assets/js/155.472d5cc5.js"><link rel="prefetch" href="/assets/js/156.adbc4f7d.js"><link rel="prefetch" href="/assets/js/157.9c2e3c48.js"><link rel="prefetch" href="/assets/js/158.1b927721.js"><link rel="prefetch" href="/assets/js/159.6887401e.js"><link rel="prefetch" href="/assets/js/16.13dd0421.js"><link rel="prefetch" href="/assets/js/160.dc3fcdbe.js"><link rel="prefetch" href="/assets/js/161.92df3db6.js"><link rel="prefetch" href="/assets/js/162.3d998157.js"><link rel="prefetch" href="/assets/js/163.ccf415fb.js"><link rel="prefetch" href="/assets/js/164.5c460632.js"><link rel="prefetch" href="/assets/js/165.4644071d.js"><link rel="prefetch" href="/assets/js/166.c0f8bab5.js"><link rel="prefetch" href="/assets/js/167.fa6727bf.js"><link rel="prefetch" href="/assets/js/168.a69e9264.js"><link rel="prefetch" href="/assets/js/169.3f276231.js"><link rel="prefetch" href="/assets/js/17.0d0d70be.js"><link rel="prefetch" href="/assets/js/170.07ad4c0d.js"><link rel="prefetch" href="/assets/js/171.bba2325a.js"><link rel="prefetch" href="/assets/js/172.18bb4010.js"><link rel="prefetch" href="/assets/js/173.08665888.js"><link rel="prefetch" href="/assets/js/174.e226515b.js"><link rel="prefetch" href="/assets/js/175.d9e7eff1.js"><link rel="prefetch" href="/assets/js/176.aae678ec.js"><link rel="prefetch" href="/assets/js/177.66366b65.js"><link rel="prefetch" href="/assets/js/178.f1dc8fcf.js"><link rel="prefetch" href="/assets/js/179.58bbef7b.js"><link rel="prefetch" href="/assets/js/18.3d7ad613.js"><link rel="prefetch" href="/assets/js/180.5670e6d4.js"><link rel="prefetch" href="/assets/js/181.c4b18cfb.js"><link rel="prefetch" href="/assets/js/182.fe847048.js"><link rel="prefetch" href="/assets/js/183.531b6c4e.js"><link rel="prefetch" href="/assets/js/184.8cd79eb1.js"><link rel="prefetch" href="/assets/js/185.d0c46c5e.js"><link rel="prefetch" href="/assets/js/186.0defd941.js"><link rel="prefetch" href="/assets/js/187.5487a6fd.js"><link rel="prefetch" href="/assets/js/188.553b85b1.js"><link rel="prefetch" href="/assets/js/189.8c79812e.js"><link rel="prefetch" href="/assets/js/19.a903a732.js"><link rel="prefetch" href="/assets/js/190.d2064022.js"><link rel="prefetch" href="/assets/js/191.aa182c57.js"><link rel="prefetch" href="/assets/js/192.46a492bb.js"><link rel="prefetch" href="/assets/js/193.b032a923.js"><link rel="prefetch" href="/assets/js/194.501d2ff8.js"><link rel="prefetch" href="/assets/js/195.d050ca2f.js"><link rel="prefetch" href="/assets/js/196.8d74c0e4.js"><link rel="prefetch" href="/assets/js/197.902e46b4.js"><link rel="prefetch" href="/assets/js/198.296ffc6b.js"><link rel="prefetch" href="/assets/js/199.7d6ec003.js"><link rel="prefetch" href="/assets/js/20.ace6ca43.js"><link rel="prefetch" href="/assets/js/200.09c3569d.js"><link rel="prefetch" href="/assets/js/201.b5fd8aea.js"><link rel="prefetch" href="/assets/js/202.d4148767.js"><link rel="prefetch" href="/assets/js/203.24256bee.js"><link rel="prefetch" href="/assets/js/204.8668a823.js"><link rel="prefetch" href="/assets/js/205.86b35550.js"><link rel="prefetch" href="/assets/js/206.108543fc.js"><link rel="prefetch" href="/assets/js/207.401807da.js"><link rel="prefetch" href="/assets/js/208.d0d16f62.js"><link rel="prefetch" href="/assets/js/209.5f85f70d.js"><link rel="prefetch" href="/assets/js/21.3180c41b.js"><link rel="prefetch" href="/assets/js/210.c7e1a0f7.js"><link rel="prefetch" href="/assets/js/211.d0d0049e.js"><link rel="prefetch" href="/assets/js/212.4449a934.js"><link rel="prefetch" href="/assets/js/213.26ed2de8.js"><link rel="prefetch" href="/assets/js/214.d5d951fb.js"><link rel="prefetch" href="/assets/js/215.52f822c3.js"><link rel="prefetch" href="/assets/js/216.fef91b5c.js"><link rel="prefetch" href="/assets/js/217.9703ec89.js"><link rel="prefetch" href="/assets/js/218.1fc1108b.js"><link rel="prefetch" href="/assets/js/219.716760e5.js"><link rel="prefetch" href="/assets/js/22.dc4e825a.js"><link rel="prefetch" href="/assets/js/220.feca2555.js"><link rel="prefetch" href="/assets/js/221.20434b00.js"><link rel="prefetch" href="/assets/js/222.1583c395.js"><link rel="prefetch" href="/assets/js/223.9dee736e.js"><link rel="prefetch" href="/assets/js/224.b38a4279.js"><link rel="prefetch" href="/assets/js/225.95e1ee3a.js"><link rel="prefetch" href="/assets/js/226.23994a6a.js"><link rel="prefetch" href="/assets/js/227.b1a0221b.js"><link rel="prefetch" href="/assets/js/228.9d8f821b.js"><link rel="prefetch" href="/assets/js/229.4cdf2c59.js"><link rel="prefetch" href="/assets/js/23.77cffbcd.js"><link rel="prefetch" href="/assets/js/230.9b82e4da.js"><link rel="prefetch" href="/assets/js/231.453b67d6.js"><link rel="prefetch" href="/assets/js/232.cbf18b51.js"><link rel="prefetch" href="/assets/js/233.bba5884d.js"><link rel="prefetch" href="/assets/js/234.bb37aa51.js"><link rel="prefetch" href="/assets/js/235.380fc23e.js"><link rel="prefetch" href="/assets/js/237.6076f1eb.js"><link rel="prefetch" href="/assets/js/238.44bdac10.js"><link rel="prefetch" href="/assets/js/239.09968718.js"><link rel="prefetch" href="/assets/js/24.0875dace.js"><link rel="prefetch" href="/assets/js/240.24cc7265.js"><link rel="prefetch" href="/assets/js/241.764f0120.js"><link rel="prefetch" href="/assets/js/242.98e839c4.js"><link rel="prefetch" href="/assets/js/243.dfaf5b0f.js"><link rel="prefetch" href="/assets/js/244.6dbe170b.js"><link rel="prefetch" href="/assets/js/245.f0cf26b8.js"><link rel="prefetch" href="/assets/js/246.89dbfa00.js"><link rel="prefetch" href="/assets/js/247.f245ff82.js"><link rel="prefetch" href="/assets/js/248.e321588d.js"><link rel="prefetch" href="/assets/js/249.78519da7.js"><link rel="prefetch" href="/assets/js/25.b8c0e9b3.js"><link rel="prefetch" href="/assets/js/250.8c9f6c12.js"><link rel="prefetch" href="/assets/js/251.854095e0.js"><link rel="prefetch" href="/assets/js/252.11904a27.js"><link rel="prefetch" href="/assets/js/253.a2ef15c0.js"><link rel="prefetch" href="/assets/js/254.24aa1a5f.js"><link rel="prefetch" href="/assets/js/255.ad478f7c.js"><link rel="prefetch" href="/assets/js/256.f578e658.js"><link rel="prefetch" href="/assets/js/257.3372f368.js"><link rel="prefetch" href="/assets/js/258.5a31555d.js"><link rel="prefetch" href="/assets/js/259.ac3240e3.js"><link rel="prefetch" href="/assets/js/26.09fa8bef.js"><link rel="prefetch" href="/assets/js/260.a4a13e65.js"><link rel="prefetch" href="/assets/js/261.7bc38b45.js"><link rel="prefetch" href="/assets/js/262.a0b99b19.js"><link rel="prefetch" href="/assets/js/263.b0ff4be3.js"><link rel="prefetch" href="/assets/js/264.0fb5638f.js"><link rel="prefetch" href="/assets/js/265.3ee362b2.js"><link rel="prefetch" href="/assets/js/266.64fa79ac.js"><link rel="prefetch" href="/assets/js/267.85dfb5a6.js"><link rel="prefetch" href="/assets/js/268.18d5a909.js"><link rel="prefetch" href="/assets/js/269.737840b8.js"><link rel="prefetch" href="/assets/js/27.16c9b9e6.js"><link rel="prefetch" href="/assets/js/270.80efb202.js"><link rel="prefetch" href="/assets/js/271.cce81f5c.js"><link rel="prefetch" href="/assets/js/272.a17b419d.js"><link rel="prefetch" href="/assets/js/273.4869cb0e.js"><link rel="prefetch" href="/assets/js/274.d7fd3e4f.js"><link rel="prefetch" href="/assets/js/275.f9742da4.js"><link rel="prefetch" href="/assets/js/276.8bc5b1a8.js"><link rel="prefetch" href="/assets/js/277.a6ce8db8.js"><link rel="prefetch" href="/assets/js/278.8a1bae97.js"><link rel="prefetch" href="/assets/js/279.a04e0f08.js"><link rel="prefetch" href="/assets/js/28.24adc85f.js"><link rel="prefetch" href="/assets/js/280.f79053e2.js"><link rel="prefetch" href="/assets/js/281.7d70ccb4.js"><link rel="prefetch" href="/assets/js/282.6f977d09.js"><link rel="prefetch" href="/assets/js/283.a1a3961b.js"><link rel="prefetch" href="/assets/js/284.0cc3a88d.js"><link rel="prefetch" href="/assets/js/285.ac2aa22c.js"><link rel="prefetch" href="/assets/js/286.62986a24.js"><link rel="prefetch" href="/assets/js/287.af36ae8c.js"><link rel="prefetch" href="/assets/js/288.0e2fe765.js"><link rel="prefetch" href="/assets/js/289.3564ceaf.js"><link rel="prefetch" href="/assets/js/29.89ce61b5.js"><link rel="prefetch" href="/assets/js/290.f9b09a95.js"><link rel="prefetch" href="/assets/js/291.9b3a9a57.js"><link rel="prefetch" href="/assets/js/292.85dc7aa1.js"><link rel="prefetch" href="/assets/js/293.06642a16.js"><link rel="prefetch" href="/assets/js/294.e24caa94.js"><link rel="prefetch" href="/assets/js/295.b6630c82.js"><link rel="prefetch" href="/assets/js/296.d5fc6e7c.js"><link rel="prefetch" href="/assets/js/297.bcad016d.js"><link rel="prefetch" href="/assets/js/298.e9a67a4f.js"><link rel="prefetch" href="/assets/js/299.2d14da00.js"><link rel="prefetch" href="/assets/js/3.17f360d0.js"><link rel="prefetch" href="/assets/js/30.d1aa8054.js"><link rel="prefetch" href="/assets/js/300.9b6f85d0.js"><link rel="prefetch" href="/assets/js/301.baabd774.js"><link rel="prefetch" href="/assets/js/302.8a5bfa2c.js"><link rel="prefetch" href="/assets/js/303.0552127d.js"><link rel="prefetch" href="/assets/js/304.81bed0dd.js"><link rel="prefetch" href="/assets/js/305.db90e4bf.js"><link rel="prefetch" href="/assets/js/306.b2e515b7.js"><link rel="prefetch" href="/assets/js/307.8a0e359e.js"><link rel="prefetch" href="/assets/js/308.360167d7.js"><link rel="prefetch" href="/assets/js/309.1f88b629.js"><link rel="prefetch" href="/assets/js/31.2b4287b8.js"><link rel="prefetch" href="/assets/js/310.149fcb47.js"><link rel="prefetch" href="/assets/js/311.7a6b7e94.js"><link rel="prefetch" href="/assets/js/312.4f1bbcb2.js"><link rel="prefetch" href="/assets/js/313.ed0a9e5c.js"><link rel="prefetch" href="/assets/js/314.21919778.js"><link rel="prefetch" href="/assets/js/315.61c57cff.js"><link rel="prefetch" href="/assets/js/316.ae4287ac.js"><link rel="prefetch" href="/assets/js/317.5a06e49e.js"><link rel="prefetch" href="/assets/js/318.5c91e85c.js"><link rel="prefetch" href="/assets/js/319.4c6dc25b.js"><link rel="prefetch" href="/assets/js/32.f7174bfe.js"><link rel="prefetch" href="/assets/js/320.e63ef187.js"><link rel="prefetch" href="/assets/js/321.19e6d42f.js"><link rel="prefetch" href="/assets/js/322.80170711.js"><link rel="prefetch" href="/assets/js/323.7e9c3cdc.js"><link rel="prefetch" href="/assets/js/324.286b2957.js"><link rel="prefetch" href="/assets/js/325.9bca4d0d.js"><link rel="prefetch" href="/assets/js/326.182d121f.js"><link rel="prefetch" href="/assets/js/327.dd5929c0.js"><link rel="prefetch" href="/assets/js/328.60107055.js"><link rel="prefetch" href="/assets/js/329.422533d7.js"><link rel="prefetch" href="/assets/js/33.ee922c4d.js"><link rel="prefetch" href="/assets/js/330.c6c2a508.js"><link rel="prefetch" href="/assets/js/331.c80d9de5.js"><link rel="prefetch" href="/assets/js/332.eb0af05f.js"><link rel="prefetch" href="/assets/js/333.61c3117a.js"><link rel="prefetch" href="/assets/js/334.36894e06.js"><link rel="prefetch" href="/assets/js/335.7ba144e9.js"><link rel="prefetch" href="/assets/js/336.5cd831f9.js"><link rel="prefetch" href="/assets/js/337.54b04ae2.js"><link rel="prefetch" href="/assets/js/338.65b1a3c1.js"><link rel="prefetch" href="/assets/js/339.808d3284.js"><link rel="prefetch" href="/assets/js/34.de720458.js"><link rel="prefetch" href="/assets/js/340.75befd5d.js"><link rel="prefetch" href="/assets/js/341.8f35cb19.js"><link rel="prefetch" href="/assets/js/342.df708318.js"><link rel="prefetch" href="/assets/js/343.fce19338.js"><link rel="prefetch" href="/assets/js/344.c1a3920f.js"><link rel="prefetch" href="/assets/js/345.d0675e31.js"><link rel="prefetch" href="/assets/js/346.fdf08890.js"><link rel="prefetch" href="/assets/js/347.8274a5b6.js"><link rel="prefetch" href="/assets/js/348.9dd931a4.js"><link rel="prefetch" href="/assets/js/349.254fe21d.js"><link rel="prefetch" href="/assets/js/35.4454ea43.js"><link rel="prefetch" href="/assets/js/350.941e7270.js"><link rel="prefetch" href="/assets/js/351.94e380ac.js"><link rel="prefetch" href="/assets/js/352.841dd34f.js"><link rel="prefetch" href="/assets/js/353.ba4b3072.js"><link rel="prefetch" href="/assets/js/354.2ddd6766.js"><link rel="prefetch" href="/assets/js/355.e66c7289.js"><link rel="prefetch" href="/assets/js/356.920b3ebb.js"><link rel="prefetch" href="/assets/js/357.dca11ccb.js"><link rel="prefetch" href="/assets/js/358.7ec2160b.js"><link rel="prefetch" href="/assets/js/359.f4b533d1.js"><link rel="prefetch" href="/assets/js/36.d9c2a9db.js"><link rel="prefetch" href="/assets/js/360.bd21b670.js"><link rel="prefetch" href="/assets/js/361.52ffa5a1.js"><link rel="prefetch" href="/assets/js/362.68ba7cdd.js"><link rel="prefetch" href="/assets/js/363.78cc63b6.js"><link rel="prefetch" href="/assets/js/364.452e6e03.js"><link rel="prefetch" href="/assets/js/365.a5bf58af.js"><link rel="prefetch" href="/assets/js/366.a2652a53.js"><link rel="prefetch" href="/assets/js/367.df61be65.js"><link rel="prefetch" href="/assets/js/368.b68bb759.js"><link rel="prefetch" href="/assets/js/369.fdab3f73.js"><link rel="prefetch" href="/assets/js/37.2e8cbe24.js"><link rel="prefetch" href="/assets/js/370.ce53a7bb.js"><link rel="prefetch" href="/assets/js/371.dc258d49.js"><link rel="prefetch" href="/assets/js/372.0b1edb7e.js"><link rel="prefetch" href="/assets/js/373.98063c74.js"><link rel="prefetch" href="/assets/js/374.51d40903.js"><link rel="prefetch" href="/assets/js/375.f87599bb.js"><link rel="prefetch" href="/assets/js/376.e3dc8984.js"><link rel="prefetch" href="/assets/js/377.c5079600.js"><link rel="prefetch" href="/assets/js/378.e3dcf9fd.js"><link rel="prefetch" href="/assets/js/379.ddf55724.js"><link rel="prefetch" href="/assets/js/38.1913a7d7.js"><link rel="prefetch" href="/assets/js/380.868298bf.js"><link rel="prefetch" href="/assets/js/381.47029fa4.js"><link rel="prefetch" href="/assets/js/382.1323e975.js"><link rel="prefetch" href="/assets/js/383.ac7f1567.js"><link rel="prefetch" href="/assets/js/384.3eb329f8.js"><link rel="prefetch" href="/assets/js/385.9e349f5e.js"><link rel="prefetch" href="/assets/js/386.ef40ce05.js"><link rel="prefetch" href="/assets/js/387.6c362542.js"><link rel="prefetch" href="/assets/js/388.524cd102.js"><link rel="prefetch" href="/assets/js/389.296b706c.js"><link rel="prefetch" href="/assets/js/39.5aed1637.js"><link rel="prefetch" href="/assets/js/390.6c6d77d1.js"><link rel="prefetch" href="/assets/js/391.c6556dad.js"><link rel="prefetch" href="/assets/js/392.f6c05801.js"><link rel="prefetch" href="/assets/js/393.10b84c25.js"><link rel="prefetch" href="/assets/js/394.7edec3a1.js"><link rel="prefetch" href="/assets/js/395.7c5029b8.js"><link rel="prefetch" href="/assets/js/396.a1a62605.js"><link rel="prefetch" href="/assets/js/397.be9e9cf5.js"><link rel="prefetch" href="/assets/js/398.372e1855.js"><link rel="prefetch" href="/assets/js/399.494167f8.js"><link rel="prefetch" href="/assets/js/40.9614bca4.js"><link rel="prefetch" href="/assets/js/400.18f13f62.js"><link rel="prefetch" href="/assets/js/401.ec29b9ae.js"><link rel="prefetch" href="/assets/js/402.b4b3ed10.js"><link rel="prefetch" href="/assets/js/403.dacb6823.js"><link rel="prefetch" href="/assets/js/404.bd7b3e65.js"><link rel="prefetch" href="/assets/js/405.252618e9.js"><link rel="prefetch" href="/assets/js/406.ab258b56.js"><link rel="prefetch" href="/assets/js/407.fc91b307.js"><link rel="prefetch" href="/assets/js/408.1f61bbb4.js"><link rel="prefetch" href="/assets/js/409.63457ce7.js"><link rel="prefetch" href="/assets/js/41.4c9121f8.js"><link rel="prefetch" href="/assets/js/410.d7596150.js"><link rel="prefetch" href="/assets/js/411.06cf9614.js"><link rel="prefetch" href="/assets/js/412.b54366dd.js"><link rel="prefetch" href="/assets/js/413.3e89e98b.js"><link rel="prefetch" href="/assets/js/414.b0f580d6.js"><link rel="prefetch" href="/assets/js/415.3bad3c01.js"><link rel="prefetch" href="/assets/js/416.a3510681.js"><link rel="prefetch" href="/assets/js/417.2c5d1142.js"><link rel="prefetch" href="/assets/js/418.87d22ee2.js"><link rel="prefetch" href="/assets/js/419.ba41b959.js"><link rel="prefetch" href="/assets/js/42.94741244.js"><link rel="prefetch" href="/assets/js/420.add76658.js"><link rel="prefetch" href="/assets/js/421.9bdf7fe7.js"><link rel="prefetch" href="/assets/js/422.8d07f71e.js"><link rel="prefetch" href="/assets/js/423.f28f89c1.js"><link rel="prefetch" href="/assets/js/424.60811254.js"><link rel="prefetch" href="/assets/js/425.2319dbe6.js"><link rel="prefetch" href="/assets/js/426.4b80d3d9.js"><link rel="prefetch" href="/assets/js/427.49de3f3e.js"><link rel="prefetch" href="/assets/js/428.fb29b2a8.js"><link rel="prefetch" href="/assets/js/429.0cae4902.js"><link rel="prefetch" href="/assets/js/43.0d7c9098.js"><link rel="prefetch" href="/assets/js/430.17d2231a.js"><link rel="prefetch" href="/assets/js/431.6954bf71.js"><link rel="prefetch" href="/assets/js/432.053b873f.js"><link rel="prefetch" href="/assets/js/433.9e0c2d89.js"><link rel="prefetch" href="/assets/js/434.504050de.js"><link rel="prefetch" href="/assets/js/435.837dce81.js"><link rel="prefetch" href="/assets/js/436.8bbc738e.js"><link rel="prefetch" href="/assets/js/437.a4fc45e7.js"><link rel="prefetch" href="/assets/js/438.bf255804.js"><link rel="prefetch" href="/assets/js/439.364a3d38.js"><link rel="prefetch" href="/assets/js/44.49b4ebc7.js"><link rel="prefetch" href="/assets/js/440.c6d5f478.js"><link rel="prefetch" href="/assets/js/441.ba50046b.js"><link rel="prefetch" href="/assets/js/442.3bce92c3.js"><link rel="prefetch" href="/assets/js/443.00c98cfe.js"><link rel="prefetch" href="/assets/js/444.5664322e.js"><link rel="prefetch" href="/assets/js/445.877f66a1.js"><link rel="prefetch" href="/assets/js/446.aa840c2f.js"><link rel="prefetch" href="/assets/js/447.b026ffb2.js"><link rel="prefetch" href="/assets/js/448.b28aa71a.js"><link rel="prefetch" href="/assets/js/449.48f8eff1.js"><link rel="prefetch" href="/assets/js/45.03dfcebf.js"><link rel="prefetch" href="/assets/js/450.28853153.js"><link rel="prefetch" href="/assets/js/451.19d0767a.js"><link rel="prefetch" href="/assets/js/452.f8878832.js"><link rel="prefetch" href="/assets/js/453.281e0135.js"><link rel="prefetch" href="/assets/js/454.3431cf32.js"><link rel="prefetch" href="/assets/js/455.71a68d78.js"><link rel="prefetch" href="/assets/js/456.bfb0c6b5.js"><link rel="prefetch" href="/assets/js/457.9effc9c6.js"><link rel="prefetch" href="/assets/js/458.75b4a9e0.js"><link rel="prefetch" href="/assets/js/459.dc2ee8a9.js"><link rel="prefetch" href="/assets/js/46.2cae6041.js"><link rel="prefetch" href="/assets/js/460.c875a9e6.js"><link rel="prefetch" href="/assets/js/461.6973d8d5.js"><link rel="prefetch" href="/assets/js/462.efe609b9.js"><link rel="prefetch" href="/assets/js/463.760957a6.js"><link rel="prefetch" href="/assets/js/464.bc530c49.js"><link rel="prefetch" href="/assets/js/465.329a71e6.js"><link rel="prefetch" href="/assets/js/466.b1557f33.js"><link rel="prefetch" href="/assets/js/467.da228937.js"><link rel="prefetch" href="/assets/js/468.3afb2ecf.js"><link rel="prefetch" href="/assets/js/469.b5e5e142.js"><link rel="prefetch" href="/assets/js/47.4d8b752a.js"><link rel="prefetch" href="/assets/js/470.9905d72e.js"><link rel="prefetch" href="/assets/js/471.e10e3102.js"><link rel="prefetch" href="/assets/js/472.7477c1b0.js"><link rel="prefetch" href="/assets/js/473.10527fde.js"><link rel="prefetch" href="/assets/js/474.24ed3c8d.js"><link rel="prefetch" href="/assets/js/475.9c283a73.js"><link rel="prefetch" href="/assets/js/476.ecd2ad0e.js"><link rel="prefetch" href="/assets/js/477.a9c10c46.js"><link rel="prefetch" href="/assets/js/478.5ca857f6.js"><link rel="prefetch" href="/assets/js/479.057c929a.js"><link rel="prefetch" href="/assets/js/48.2133e19b.js"><link rel="prefetch" href="/assets/js/480.f6a0b718.js"><link rel="prefetch" href="/assets/js/481.2a9514fb.js"><link rel="prefetch" href="/assets/js/482.19e10a70.js"><link rel="prefetch" href="/assets/js/483.72d185e1.js"><link rel="prefetch" href="/assets/js/484.bd878cf9.js"><link rel="prefetch" href="/assets/js/485.0b7a3680.js"><link rel="prefetch" href="/assets/js/486.738508de.js"><link rel="prefetch" href="/assets/js/487.a28376ba.js"><link rel="prefetch" href="/assets/js/488.27a265da.js"><link rel="prefetch" href="/assets/js/489.df9b7df2.js"><link rel="prefetch" href="/assets/js/49.b40fa721.js"><link rel="prefetch" href="/assets/js/490.b00c77e7.js"><link rel="prefetch" href="/assets/js/491.8ce596f8.js"><link rel="prefetch" href="/assets/js/492.6da0b951.js"><link rel="prefetch" href="/assets/js/493.194142a4.js"><link rel="prefetch" href="/assets/js/494.525df756.js"><link rel="prefetch" href="/assets/js/495.98e87f8b.js"><link rel="prefetch" href="/assets/js/496.38003e2d.js"><link rel="prefetch" href="/assets/js/497.b0a8634b.js"><link rel="prefetch" href="/assets/js/498.b58d6c6f.js"><link rel="prefetch" href="/assets/js/499.8d7790f2.js"><link rel="prefetch" href="/assets/js/5.5e361e5e.js"><link rel="prefetch" href="/assets/js/50.764cf6f8.js"><link rel="prefetch" href="/assets/js/500.74246557.js"><link rel="prefetch" href="/assets/js/501.69865b84.js"><link rel="prefetch" href="/assets/js/502.8a5aadec.js"><link rel="prefetch" href="/assets/js/503.5a73da6a.js"><link rel="prefetch" href="/assets/js/504.99a194f4.js"><link rel="prefetch" href="/assets/js/505.ba8e9f9a.js"><link rel="prefetch" href="/assets/js/506.62b81c0a.js"><link rel="prefetch" href="/assets/js/507.28abce36.js"><link rel="prefetch" href="/assets/js/508.29669b9c.js"><link rel="prefetch" href="/assets/js/509.9878a033.js"><link rel="prefetch" href="/assets/js/51.81b21a23.js"><link rel="prefetch" href="/assets/js/510.05d83afc.js"><link rel="prefetch" href="/assets/js/511.eb3195ff.js"><link rel="prefetch" href="/assets/js/512.a7002238.js"><link rel="prefetch" href="/assets/js/513.22a7f09a.js"><link rel="prefetch" href="/assets/js/514.75f4d771.js"><link rel="prefetch" href="/assets/js/515.8584e42f.js"><link rel="prefetch" href="/assets/js/516.7a30e6b6.js"><link rel="prefetch" href="/assets/js/517.a9f3a2fd.js"><link rel="prefetch" href="/assets/js/518.c38887f9.js"><link rel="prefetch" href="/assets/js/519.7cd822e2.js"><link rel="prefetch" href="/assets/js/52.b1ffb904.js"><link rel="prefetch" href="/assets/js/520.e73e7ff9.js"><link rel="prefetch" href="/assets/js/521.9ab850a5.js"><link rel="prefetch" href="/assets/js/522.f6751bd1.js"><link rel="prefetch" href="/assets/js/523.6f627afc.js"><link rel="prefetch" href="/assets/js/524.c060952e.js"><link rel="prefetch" href="/assets/js/525.6f2a5f32.js"><link rel="prefetch" href="/assets/js/526.7c2ab23e.js"><link rel="prefetch" href="/assets/js/527.36f20115.js"><link rel="prefetch" href="/assets/js/528.6be037b0.js"><link rel="prefetch" href="/assets/js/529.91d25836.js"><link rel="prefetch" href="/assets/js/53.bcbeb201.js"><link rel="prefetch" href="/assets/js/530.efb60ab9.js"><link rel="prefetch" href="/assets/js/531.989c79c0.js"><link rel="prefetch" href="/assets/js/532.e840b5c1.js"><link rel="prefetch" href="/assets/js/533.a71ba3c3.js"><link rel="prefetch" href="/assets/js/534.c35d83bf.js"><link rel="prefetch" href="/assets/js/535.a1792b22.js"><link rel="prefetch" href="/assets/js/536.4613ebf6.js"><link rel="prefetch" href="/assets/js/537.d48f5626.js"><link rel="prefetch" href="/assets/js/538.db962bd6.js"><link rel="prefetch" href="/assets/js/539.617c1259.js"><link rel="prefetch" href="/assets/js/54.d684ca2d.js"><link rel="prefetch" href="/assets/js/540.17f0f7cc.js"><link rel="prefetch" href="/assets/js/541.6904dd50.js"><link rel="prefetch" href="/assets/js/542.d1d9119e.js"><link rel="prefetch" href="/assets/js/55.8a30377a.js"><link rel="prefetch" href="/assets/js/56.b68c0d3c.js"><link rel="prefetch" href="/assets/js/57.07c8c60e.js"><link rel="prefetch" href="/assets/js/58.447581b8.js"><link rel="prefetch" href="/assets/js/59.80f69fa5.js"><link rel="prefetch" href="/assets/js/6.d326a394.js"><link rel="prefetch" href="/assets/js/60.6268fb7c.js"><link rel="prefetch" href="/assets/js/61.4f37698f.js"><link rel="prefetch" href="/assets/js/62.f7ce00d9.js"><link rel="prefetch" href="/assets/js/63.8b5c4639.js"><link rel="prefetch" href="/assets/js/64.23f5b95c.js"><link rel="prefetch" href="/assets/js/65.4985d24b.js"><link rel="prefetch" href="/assets/js/66.f3358479.js"><link rel="prefetch" href="/assets/js/67.a404dc7c.js"><link rel="prefetch" href="/assets/js/68.4867dcf5.js"><link rel="prefetch" href="/assets/js/69.e6533bdf.js"><link rel="prefetch" href="/assets/js/7.89860eb3.js"><link rel="prefetch" href="/assets/js/70.d6581cb5.js"><link rel="prefetch" href="/assets/js/71.46199338.js"><link rel="prefetch" href="/assets/js/72.c74e5c3e.js"><link rel="prefetch" href="/assets/js/73.a9a3aa2f.js"><link rel="prefetch" href="/assets/js/74.d832c7a1.js"><link rel="prefetch" href="/assets/js/75.337ed40c.js"><link rel="prefetch" href="/assets/js/76.39b2c04e.js"><link rel="prefetch" href="/assets/js/77.01ba5622.js"><link rel="prefetch" href="/assets/js/78.b211f414.js"><link rel="prefetch" href="/assets/js/79.1fe9a2c0.js"><link rel="prefetch" href="/assets/js/8.54c6c177.js"><link rel="prefetch" href="/assets/js/80.ecf976f6.js"><link rel="prefetch" href="/assets/js/81.8c22e86c.js"><link rel="prefetch" href="/assets/js/82.79d6812b.js"><link rel="prefetch" href="/assets/js/83.e8b79a8d.js"><link rel="prefetch" href="/assets/js/84.46bbb939.js"><link rel="prefetch" href="/assets/js/85.360cccc1.js"><link rel="prefetch" href="/assets/js/86.99309a51.js"><link rel="prefetch" href="/assets/js/87.eb2628ba.js"><link rel="prefetch" href="/assets/js/88.48c3b7aa.js"><link rel="prefetch" href="/assets/js/89.b3d56b26.js"><link rel="prefetch" href="/assets/js/9.061a1f3f.js"><link rel="prefetch" href="/assets/js/90.530573e8.js"><link rel="prefetch" href="/assets/js/91.0b43a13c.js"><link rel="prefetch" href="/assets/js/92.5978b6b1.js"><link rel="prefetch" href="/assets/js/93.0152dcb5.js"><link rel="prefetch" href="/assets/js/94.e6697216.js"><link rel="prefetch" href="/assets/js/95.402c7586.js"><link rel="prefetch" href="/assets/js/96.a8fe31d7.js"><link rel="prefetch" href="/assets/js/97.1f54b8d2.js"><link rel="prefetch" href="/assets/js/98.d3133590.js"><link rel="prefetch" href="/assets/js/99.0e23148c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ef7cd65c.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="KNOTE" class="logo"> <span class="site-name can-hide">KNOTE</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/note/" class="nav-link">导航</a></div><div class="nav-item"><a href="/whell/web/" class="nav-link">收藏</a></div><div class="nav-item"><a href="/tags/" class="nav-link">标签</a></div><div class="nav-item"><a href="/archives/" class="nav-link">归档</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/about/" class="nav-link">关于</a></li></ul></div></div> <a href="https://github.com/micolor" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/avatar.png"> <div class="blogger-info"><h3>AnWen</h3> <span>积跬步以至千里</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/note/" class="nav-link">导航</a></div><div class="nav-item"><a href="/whell/web/" class="nav-link">收藏</a></div><div class="nav-item"><a href="/tags/" class="nav-link">标签</a></div><div class="nav-item"><a href="/archives/" class="nav-link">归档</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/baaa02/" class="nav-link">实用技巧</a></li><li class="dropdown-item"><!----> <a href="/about/" class="nav-link">关于</a></li></ul></div></div> <a href="https://github.com/micolor" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Spring</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/spring6/overview/" class="sidebar-link">Spring6 - 概述</a></li><li><a href="/spring6/introduction/" class="sidebar-link">Spring6 - 入门</a></li><li><a href="/spring6/container/" class="sidebar-link">Spring6 - 容器</a></li><li><a href="/spring6/handwriting-container/" class="sidebar-link">Spring6 - 手写容器</a></li><li><a href="/spring6/aop/" aria-current="page" class="active sidebar-link">Spring6 - AOP</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/spring6/aop/#场景模拟" class="sidebar-link">场景模拟</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/spring6/aop/#声明接口" class="sidebar-link">声明接口</a></li><li class="sidebar-sub-header level3"><a href="/spring6/aop/#创建实现类" class="sidebar-link">创建实现类</a></li><li class="sidebar-sub-header level3"><a href="/spring6/aop/#创建带日志功能的实现类" class="sidebar-link">创建带日志功能的实现类</a></li><li class="sidebar-sub-header level3"><a href="/spring6/aop/#提出问题" class="sidebar-link">提出问题</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/spring6/aop/#代理模式" class="sidebar-link">代理模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/spring6/aop/#概念" class="sidebar-link">概念</a></li><li class="sidebar-sub-header level3"><a href="/spring6/aop/#静态代理" class="sidebar-link">静态代理</a></li><li class="sidebar-sub-header level3"><a href="/spring6/aop/#动态代理" class="sidebar-link">动态代理</a></li><li class="sidebar-sub-header level3"><a href="/spring6/aop/#测试" class="sidebar-link">测试</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/spring6/aop/#aop-概念及相关术语" class="sidebar-link">AOP 概念及相关术语</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/spring6/aop/#概述" class="sidebar-link">概述</a></li><li class="sidebar-sub-header level3"><a href="/spring6/aop/#相关术语" class="sidebar-link">相关术语</a></li><li class="sidebar-sub-header level4"><a href="/spring6/aop/#横切关注点" class="sidebar-link">横切关注点</a></li><li class="sidebar-sub-header level4"><a href="/spring6/aop/#切面" class="sidebar-link">切面</a></li><li class="sidebar-sub-header level4"><a href="/spring6/aop/#目标" class="sidebar-link">目标</a></li><li class="sidebar-sub-header level4"><a href="/spring6/aop/#代理" class="sidebar-link">代理</a></li><li class="sidebar-sub-header level4"><a href="/spring6/aop/#连接点" class="sidebar-link">连接点</a></li><li class="sidebar-sub-header level4"><a href="/spring6/aop/#切入点" class="sidebar-link">切入点</a></li><li class="sidebar-sub-header level3"><a href="/spring6/aop/#作用" class="sidebar-link">作用</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/spring6/aop/#基于注解的-aop" class="sidebar-link">基于注解的 AOP</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/spring6/aop/#技术说明" class="sidebar-link">技术说明</a></li><li class="sidebar-sub-header level3"><a href="/spring6/aop/#准备工作" class="sidebar-link">准备工作</a></li><li class="sidebar-sub-header level3"><a href="/spring6/aop/#创建切面类并配置" class="sidebar-link">创建切面类并配置</a></li><li class="sidebar-sub-header level3"><a href="/spring6/aop/#各种通知" class="sidebar-link">各种通知</a></li><li class="sidebar-sub-header level3"><a href="/spring6/aop/#切入点表达式语法" class="sidebar-link">切入点表达式语法</a></li><li class="sidebar-sub-header level3"><a href="/spring6/aop/#重用切入点表达式" class="sidebar-link">重用切入点表达式</a></li><li class="sidebar-sub-header level3"><a href="/spring6/aop/#获取通知的相关信息" class="sidebar-link">获取通知的相关信息</a></li><li class="sidebar-sub-header level3"><a href="/spring6/aop/#环绕通知" class="sidebar-link">环绕通知</a></li><li class="sidebar-sub-header level3"><a href="/spring6/aop/#切面的优先级" class="sidebar-link">切面的优先级</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/spring6/aop/#基于xml的aop" class="sidebar-link">基于XML的AOP</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/spring6/aop/#准备工作-2" class="sidebar-link">准备工作</a></li><li class="sidebar-sub-header level3"><a href="/spring6/aop/#实现" class="sidebar-link">实现</a></li></ul></li></ul></li><li><a href="/spring6/junit/" class="sidebar-link">Spring6 - Junit</a></li><li><a href="/spring6/transaction/" class="sidebar-link">Spring6 - 事务</a></li><li><a href="/spring6/resource/" class="sidebar-link">Spring6 - Resource</a></li><li><a href="/spring6/i18n/" class="sidebar-link">Spring6 - 国际化</a></li><li><a href="/spring6/validation/" class="sidebar-link">Spring6 - 数据校验</a></li><li><a href="/spring/cache/" class="sidebar-link">Spring - Cache</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Spring Boot</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Spring Security</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Spring Cloud</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/categories/?category=Spring%E7%94%9F%E6%80%81" title="分类" data-v-06225672>Spring生态</a></li><li data-v-06225672><a href="/categories/?category=Spring" title="分类" data-v-06225672>Spring</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/micolor" target="_blank" title="作者" class="beLink" data-v-06225672>AnWen</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-10-27</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">Spring6 - AOP<!----></h1> <!----> <div class="theme-vdoing-content content__default"><p></p><div class="table-of-contents"><ul><li><a href="#场景模拟">场景模拟</a><ul><li><a href="#声明接口">声明接口</a></li><li><a href="#创建实现类">创建实现类</a></li><li><a href="#创建带日志功能的实现类">创建带日志功能的实现类</a></li><li><a href="#提出问题">提出问题</a></li></ul></li><li><a href="#代理模式">代理模式</a><ul><li><a href="#概念">概念</a></li><li><a href="#静态代理">静态代理</a></li><li><a href="#动态代理">动态代理</a></li><li><a href="#测试">测试</a></li></ul></li><li><a href="#aop-概念及相关术语">AOP 概念及相关术语</a><ul><li><a href="#概述">概述</a></li><li><a href="#相关术语">相关术语</a></li><li><a href="#作用">作用</a></li></ul></li><li><a href="#基于注解的-aop">基于注解的 AOP</a><ul><li><a href="#技术说明">技术说明</a></li><li><a href="#准备工作">准备工作</a></li><li><a href="#创建切面类并配置">创建切面类并配置</a></li><li><a href="#各种通知">各种通知</a></li><li><a href="#切入点表达式语法">切入点表达式语法</a></li><li><a href="#重用切入点表达式">重用切入点表达式</a></li><li><a href="#获取通知的相关信息">获取通知的相关信息</a></li><li><a href="#环绕通知">环绕通知</a></li><li><a href="#切面的优先级">切面的优先级</a></li></ul></li><li><a href="#基于xml的aop">基于XML的AOP</a><ul><li><a href="#准备工作">准备工作</a></li><li><a href="#实现">实现</a></li></ul></li></ul></div><p></p> <h2 id="场景模拟"><a href="#场景模拟" class="header-anchor">#</a> 场景模拟</h2> <p><strong>搭建子模块：Spring6-aop</strong></p> <h3 id="声明接口"><a href="#声明接口" class="header-anchor">#</a> 声明接口</h3> <p>声明计算器接口 Calculator，包含加减乘除的抽象方法</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Calculator</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">int</span> <span class="token function">sub</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">int</span> <span class="token function">mul</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">int</span> <span class="token function">div</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="创建实现类"><a href="#创建实现类" class="header-anchor">#</a> 创建实现类</h3> <p><img src="https://cdn.jsdelivr.net/gh/Kele-Bingtang/static/img/Spring6/20231028000106.png" alt="images"></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CalculatorImpl</span> <span class="token keyword">implements</span> <span class="token class-name">Calculator</span> <span class="token punctuation">{</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
        <span class="token keyword">int</span> result <span class="token operator">=</span> i <span class="token operator">+</span> j<span class="token punctuation">;</span>
    
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;方法内部 result = &quot;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">sub</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
        <span class="token keyword">int</span> result <span class="token operator">=</span> i <span class="token operator">-</span> j<span class="token punctuation">;</span>
    
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;方法内部 result = &quot;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">mul</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
        <span class="token keyword">int</span> result <span class="token operator">=</span> i <span class="token operator">*</span> j<span class="token punctuation">;</span>
    
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;方法内部 result = &quot;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">div</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
        <span class="token keyword">int</span> result <span class="token operator">=</span> i <span class="token operator">/</span> j<span class="token punctuation">;</span>
    
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;方法内部 result = &quot;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><h3 id="创建带日志功能的实现类"><a href="#创建带日志功能的实现类" class="header-anchor">#</a> 创建带日志功能的实现类</h3> <p><img src="https://cdn.jsdelivr.net/gh/Kele-Bingtang/static/img/Spring6/20231028000108.png" alt="images"></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CalculatorLogImpl</span> <span class="token keyword">implements</span> <span class="token class-name">Calculator</span> <span class="token punctuation">{</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;[日志] add 方法开始了，参数是：&quot;</span> <span class="token operator">+</span> i <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span> <span class="token operator">+</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
        <span class="token keyword">int</span> result <span class="token operator">=</span> i <span class="token operator">+</span> j<span class="token punctuation">;</span>
    
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;方法内部 result = &quot;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;[日志] add 方法结束了，结果是：&quot;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">sub</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;[日志] sub 方法开始了，参数是：&quot;</span> <span class="token operator">+</span> i <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span> <span class="token operator">+</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
        <span class="token keyword">int</span> result <span class="token operator">=</span> i <span class="token operator">-</span> j<span class="token punctuation">;</span>
    
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;方法内部 result = &quot;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;[日志] sub 方法结束了，结果是：&quot;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">mul</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;[日志] mul 方法开始了，参数是：&quot;</span> <span class="token operator">+</span> i <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span> <span class="token operator">+</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
        <span class="token keyword">int</span> result <span class="token operator">=</span> i <span class="token operator">*</span> j<span class="token punctuation">;</span>
    
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;方法内部 result = &quot;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;[日志] mul 方法结束了，结果是：&quot;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">div</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;[日志] div 方法开始了，参数是：&quot;</span> <span class="token operator">+</span> i <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span> <span class="token operator">+</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
        <span class="token keyword">int</span> result <span class="token operator">=</span> i <span class="token operator">/</span> j<span class="token punctuation">;</span>
    
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;方法内部 result = &quot;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;[日志] div 方法结束了，结果是：&quot;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br></div></div><h3 id="提出问题"><a href="#提出问题" class="header-anchor">#</a> 提出问题</h3> <p>针对带日志功能的实现类，我们发现有如下缺陷：</p> <ul><li>对核心业务功能有干扰，导致程序员在开发核心业务功能时分散了精力</li> <li>附加功能分散在各个业务功能方法中，不利于统一维护</li></ul> <blockquote><p>解决思路</p></blockquote> <p>解决这两个问题，核心就是：解耦。我们需要把附加功能从业务功能代码中抽取出来。</p> <blockquote><p>困难</p></blockquote> <p>解决问题的困难：要抽取的代码在方法内部，靠以前把子类中的重复代码抽取到父类的方式没法解决。所以需要引入新的技术。</p> <h2 id="代理模式"><a href="#代理模式" class="header-anchor">#</a> 代理模式</h2> <h3 id="概念"><a href="#概念" class="header-anchor">#</a> 概念</h3> <blockquote><p>介绍</p></blockquote> <p>二十三种设计模式中的一种，属于结构型模式。它的作用就是通过提供一个代理类，让我们在调用目标方法的时候，不再是直接对目标方法进行调用，而是通过代理类 <strong>间接</strong> 调用。让不属于目标方法核心逻辑的代码从目标方法中剥离出来—— <strong>解耦</strong>。调用目标方法时先调用代理对象的方法，减少对目标方法的调用和打扰，同时让附加功能能够集中在一起也有利于统一维护。</p> <p><img src="https://cdn.jsdelivr.net/gh/Kele-Bingtang/static/img/Spring6/20231028000111.png" alt="images"></p> <p>使用代理后：</p> <p><img src="https://cdn.jsdelivr.net/gh/Kele-Bingtang/static/img/Spring6/20231028005043.png" alt="images"></p> <blockquote><p>生活中的代理</p></blockquote> <ul><li>广告商找大明星拍广告需要经过经纪人</li> <li>合作伙伴找大老板谈合作要约见面时间需要经过秘书</li> <li>房产中介是买卖双方的代理</li></ul> <blockquote><p>相关术语</p></blockquote> <ul><li>代理：将非核心逻辑剥离出来以后，封装这些非核心逻辑的类、对象、方法。</li> <li>目标：被代理「套用」了非核心逻辑代码的类、对象、方法。</li></ul> <h3 id="静态代理"><a href="#静态代理" class="header-anchor">#</a> 静态代理</h3> <p>创建静态代理类：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CalculatorStaticProxy</span> <span class="token keyword">implements</span> <span class="token class-name">Calculator</span> <span class="token punctuation">{</span>
    
    <span class="token comment">// 将被代理的目标对象声明为成员变量</span>
    <span class="token keyword">private</span> <span class="token class-name">Calculator</span> target<span class="token punctuation">;</span>
    
    <span class="token keyword">public</span> <span class="token class-name">CalculatorStaticProxy</span><span class="token punctuation">(</span><span class="token class-name">Calculator</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>target <span class="token operator">=</span> target<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
        <span class="token comment">// 附加功能由代理类中的代理方法来实现</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;[日志] add 方法开始了，参数是：&quot;</span> <span class="token operator">+</span> i <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span> <span class="token operator">+</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
        <span class="token comment">// 通过目标对象来实现核心业务逻辑</span>
        <span class="token keyword">int</span> addResult <span class="token operator">=</span> target<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;[日志] add 方法结束了，结果是：&quot;</span> <span class="token operator">+</span> addResult<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
        <span class="token keyword">return</span> addResult<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>静态代理确实实现了解耦，但是由于代码都写死了，完全不具备任何的灵活性。就拿日志功能来说，将来其他地方也需要附加日志，那还得再声明更多个静态代理类，那就产生了大量重复的代码，日志功能还是分散的，没有统一管理。</p> <p>提出进一步的需求：将日志功能集中到一个代理类中，将来有任何日志需求，都通过这一个代理类来实现。这就需要使用动态代理技术了。</p> <h3 id="动态代理"><a href="#动态代理" class="header-anchor">#</a> 动态代理</h3> <p><img src="https://cdn.jsdelivr.net/gh/Kele-Bingtang/static/img/Spring6/20231028000114.png" alt="images"></p> <p>生产代理对象的工厂类：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProxyFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Object</span> target<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">ProxyFactory</span><span class="token punctuation">(</span><span class="token class-name">Object</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>target <span class="token operator">=</span> target<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">getProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

        <span class="token comment">/**
         * newProxyInstance()：创建一个代理实例
         * 其中有三个参数：
         * 1、classLoader：加载动态生成的代理类的类加载器
         * 2、interfaces：目标对象实现的所有接口的class对象所组成的数组
         * 3、invocationHandler：设置代理对象实现目标对象方法的过程，即代理类中如何重写接口中的抽象方法
         */</span>
        <span class="token class-name">ClassLoader</span> classLoader <span class="token operator">=</span> target<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> interfaces <span class="token operator">=</span> target<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">InvocationHandler</span> invocationHandler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InvocationHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> proxy<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
                <span class="token comment">/**
                 * proxy：代理对象
                 * method：代理对象需要实现的方法，即其中需要重写的方法
                 * args：method所对应方法的参数
                 */</span>
                <span class="token class-name">Object</span> result <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;[动态代理][日志] &quot;</span><span class="token operator">+</span>method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;，参数：&quot;</span><span class="token operator">+</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    result <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;[动态代理][日志] &quot;</span><span class="token operator">+</span>method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;，结果：&quot;</span><span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;[动态代理][日志] &quot;</span><span class="token operator">+</span>method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;，异常：&quot;</span><span class="token operator">+</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;[动态代理][日志] &quot;</span><span class="token operator">+</span>method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;，方法执行完毕&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">return</span> result<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span>classLoader<span class="token punctuation">,</span> interfaces<span class="token punctuation">,</span> invocationHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><h3 id="测试"><a href="#测试" class="header-anchor">#</a> 测试</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDynamicProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">ProxyFactory</span> factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProxyFactory</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CalculatorLogImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Calculator</span> proxy <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Calculator</span><span class="token punctuation">)</span> factory<span class="token punctuation">.</span><span class="token function">getProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    proxy<span class="token punctuation">.</span><span class="token function">div</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//proxy.div(1,1);</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="aop-概念及相关术语"><a href="#aop-概念及相关术语" class="header-anchor">#</a> AOP 概念及相关术语</h2> <h3 id="概述"><a href="#概述" class="header-anchor">#</a> 概述</h3> <p>AOP（Aspect Oriented Programming）是一种设计思想，是软件设计领域中的面向切面编程，它是面向对象编程的一种补充和完善，它以通过预编译方式和运行期动态代理方式实现，在不修改源代码的情况下，给程序动态统一添加额外功能的一种技术。利用 AOP 可以对业务逻辑的各个部分进行隔离，从而使得业务逻辑各部分之间的耦合度降低，提高程序的可重用性，同时提高了开发的效率。</p> <h3 id="相关术语"><a href="#相关术语" class="header-anchor">#</a> 相关术语</h3> <h4 id="横切关注点"><a href="#横切关注点" class="header-anchor">#</a> 横切关注点</h4> <p>分散在每个各个模块中解决同一样的问题，如用户验证、日志管理、事务处理、数据缓存都属于横切关注点。</p> <p>从每个方法中抽取出来的同一类非核心业务。在同一个项目中，我们可以使用多个横切关注点对相关方法进行多个不同方面的增强。</p> <p>这个概念不是语法层面的，而是根据附加功能的逻辑上的需要：有十个附加功能，就有十个横切关注点。</p> <p><img src="https://cdn.jsdelivr.net/gh/Kele-Bingtang/static/img/Spring6/20231028000117.png" alt="images"></p> <h5 id="_2通知-增强"><a href="#_2通知-增强" class="header-anchor">#</a> ②通知（增强）</h5> <p><strong>增强，通俗说，就是你想要增强的功能，比如 安全，事务，日志等。</strong></p> <p>每一个横切关注点上要做的事情都需要写一个方法来实现，这样的方法就叫通知方法。</p> <ul><li>前置通知：在被代理的目标方法<strong>前</strong>执行</li> <li>返回通知：在被代理的目标方法<strong>成功结束</strong>后执行（<strong>寿终正寝</strong>）</li> <li>异常通知：在被代理的目标方法<strong>异常结束</strong>后执行（<strong>死于非命</strong>）</li> <li>后置通知：在被代理的目标方法<strong>最终结束</strong>后执行（<strong>盖棺定论</strong>）</li> <li>环绕通知：使用try...catch...finally结构围绕<strong>整个</strong>被代理的目标方法，包括上面四种通知对应的所有位置</li></ul> <p><img src="https://cdn.jsdelivr.net/gh/Kele-Bingtang/static/img/Spring6/20231028000119.png" alt="images"></p> <h4 id="切面"><a href="#切面" class="header-anchor">#</a> 切面</h4> <p>封装通知方法的类。</p> <p><img src="https://cdn.jsdelivr.net/gh/Kele-Bingtang/static/img/Spring6/20231028000329.png" alt="images"></p> <h4 id="目标"><a href="#目标" class="header-anchor">#</a> 目标</h4> <p>被代理的目标对象。</p> <h4 id="代理"><a href="#代理" class="header-anchor">#</a> 代理</h4> <p>向目标对象应用通知之后创建的代理对象。</p> <h4 id="连接点"><a href="#连接点" class="header-anchor">#</a> 连接点</h4> <p>这也是一个纯逻辑概念，不是语法定义的。</p> <p>把方法排成一排，每一个横切位置看成 x 轴方向，把方法从上到下执行的顺序看成y轴，x 轴和 y 轴的交叉点就是连接点。<strong>通俗说，就是 Spring 允许你使用通知的地方</strong>。</p> <p><img src="https://cdn.jsdelivr.net/gh/Kele-Bingtang/static/img/Spring6/20231028000122.png" alt="images"></p> <h4 id="切入点"><a href="#切入点" class="header-anchor">#</a> 切入点</h4> <p>定位连接点的方式。</p> <p>每个类的方法中都包含多个连接点，所以连接点是类中客观存在的事物（从逻辑上来说）。</p> <p>如果把连接点看作数据库中的记录，那么切入点就是查询记录的 SQL 语句。</p> <p><strong>Spring 的 AOP 技术可以通过切入点定位到特定的连接点。通俗说，要实际去增强的方法</strong></p> <p>切点通过 <code>org.Springframework.aop.Pointcut</code> 接口进行描述，它使用类和方法作为连接点的查询条件。</p> <h3 id="作用"><a href="#作用" class="header-anchor">#</a> 作用</h3> <ul><li><p>简化代码：把方法中固定位置的重复的代码 <strong>抽取</strong> 出来，让被抽取的方法更专注于自己的核心功能，提高内聚性</p></li> <li><p>代码增强：把特定的功能封装到切面类中，看哪里有需要，就往上套，被 <strong>套用</strong> 了切面逻辑的方法就被切面给增强了</p></li></ul> <h2 id="基于注解的-aop"><a href="#基于注解的-aop" class="header-anchor">#</a> 基于注解的 AOP</h2> <h3 id="技术说明"><a href="#技术说明" class="header-anchor">#</a> 技术说明</h3> <p><img src="https://cdn.jsdelivr.net/gh/Kele-Bingtang/static/img/Spring6/20231028000124.png" alt="images"></p> <p><img src="https://cdn.jsdelivr.net/gh/Kele-Bingtang/static/img/Spring6/20231028000125.png" alt="image-20221216132844066"></p> <ul><li>动态代理分为 JDK 动态代理和 cglib 动态代理</li> <li>当目标类有接口的情况使用 JDK 动态代理和 cglib 动态代理，没有接口时只能使用 cglib 动态代理</li> <li>JDK 动态代理动态生成的代理类会在 <code>com.sun.proxy</code> 包下，类名为 <code>$proxy1</code>，和目标类实现相同的接口</li> <li>cglib 动态代理动态生成的代理类会和目标在在相同的包下，会继承目标类</li> <li>动态代理（InvocationHandler）：JDK 原生的实现方式，需要被代理的目标类必须实现接口。因为这个技术要求 <strong>代理对象和目标对象实现同样的接口</strong>（兄弟两个拜把子模式）</li> <li>cglib：通过 <strong>继承被代理的目标类</strong>（认干爹模式）实现代理，所以不需要目标类实现接口</li> <li>AspectJ：是 AOP 思想的一种实现。本质上是静态代理，<strong>将代理逻辑「织入」被代理的目标类编译得到的字节码文件</strong>，所以最终效果是动态的。weaver 就是织入器。Spring 只是借用了 AspectJ 中的注解</li></ul> <h3 id="准备工作"><a href="#准备工作" class="header-anchor">#</a> 准备工作</h3> <p>在 XML 所需依赖基础上再加入下面依赖即可：</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--Spring context 依赖--&gt;</span>
    <span class="token comment">&lt;!--当引入 Spring Context 依赖之后，表示将 Spring 的基础依赖引入了--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.Springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>Spring-context<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>6.0.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!--Spring aop 依赖--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.Springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>Spring-aop<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>6.0.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--Spring aspects 依赖--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.Springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>Spring-aspects<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>6.0.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!--junit5 测试--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.junit.jupiter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit-jupiter-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.3.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!--log4j2 的依赖--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.logging.log4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>log4j-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.19.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.logging.log4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>log4j-slf4j2-impl<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.19.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><p>准备被代理的目标资源</p> <p>接口：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Calculator</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">int</span> <span class="token function">sub</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">int</span> <span class="token function">mul</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">int</span> <span class="token function">div</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>实现类：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CalculatorImpl</span> <span class="token keyword">implements</span> <span class="token class-name">Calculator</span> <span class="token punctuation">{</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
        <span class="token keyword">int</span> result <span class="token operator">=</span> i <span class="token operator">+</span> j<span class="token punctuation">;</span>
    
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;方法内部 result = &quot;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">sub</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
        <span class="token keyword">int</span> result <span class="token operator">=</span> i <span class="token operator">-</span> j<span class="token punctuation">;</span>
    
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;方法内部 result = &quot;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">mul</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
        <span class="token keyword">int</span> result <span class="token operator">=</span> i <span class="token operator">*</span> j<span class="token punctuation">;</span>
    
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;方法内部 result = &quot;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">div</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
        <span class="token keyword">int</span> result <span class="token operator">=</span> i <span class="token operator">/</span> j<span class="token punctuation">;</span>
    
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;方法内部 result = &quot;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><h3 id="创建切面类并配置"><a href="#创建切面类并配置" class="header-anchor">#</a> 创建切面类并配置</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// @Aspect 表示这个类是一个切面类</span>
<span class="token annotation punctuation">@Aspect</span>
<span class="token comment">// @Component 注解保证这个切面类能够放入 IOC 容器</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LogAspect</span> <span class="token punctuation">{</span>
    
    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">&quot;execution(public int cn.youngkbt.aop.annotation.CalculatorImpl.*(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">beforeMethod</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">String</span> methodName <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> args <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>joinPoint<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Logger--&gt;前置通知，方法名：&quot;</span><span class="token operator">+</span>methodName<span class="token operator">+</span><span class="token string">&quot;，参数：&quot;</span><span class="token operator">+</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@After</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* cn.youngkbt.aop.annotation.CalculatorImpl.*(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterMethod</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">String</span> methodName <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Logger--&gt;后置通知，方法名：&quot;</span><span class="token operator">+</span>methodName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@AfterReturning</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;execution(* cn.youngkbt.aop.annotation.CalculatorImpl.*(..))&quot;</span><span class="token punctuation">,</span> returning <span class="token operator">=</span> <span class="token string">&quot;result&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterReturningMethod</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">,</span> <span class="token class-name">Object</span> result<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">String</span> methodName <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Logger--&gt;返回通知，方法名：&quot;</span><span class="token operator">+</span>methodName<span class="token operator">+</span><span class="token string">&quot;，结果：&quot;</span><span class="token operator">+</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@AfterThrowing</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;execution(* cn.youngkbt.aop.annotation.CalculatorImpl.*(..))&quot;</span><span class="token punctuation">,</span> throwing <span class="token operator">=</span> <span class="token string">&quot;ex&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterThrowingMethod</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">,</span> <span class="token class-name">Throwable</span> ex<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">String</span> methodName <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Logger--&gt;异常通知，方法名：&quot;</span><span class="token operator">+</span>methodName<span class="token operator">+</span><span class="token string">&quot;，异常：&quot;</span><span class="token operator">+</span>ex<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* cn.youngkbt.aop.annotation.CalculatorImpl.*(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">aroundMethod</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> joinPoint<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">String</span> methodName <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> args <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>joinPoint<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> result <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;环绕通知--&gt;目标对象方法执行之前&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//目标对象（连接点）方法的执行</span>
            result <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;环绕通知--&gt;目标对象方法返回值之后&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            throwable<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;环绕通知--&gt;目标对象方法出现异常时&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;环绕通知--&gt;目标对象方法执行完毕&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br></div></div><p>在Spring的配置文件中配置：</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.Springframework.org/schema/Beans<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.Springframework.org/schema/context<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>aop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.Springframework.org/schema/aop<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.Springframework.org/schema/Beans
       http://www.Springframework.org/schema/Beans/Spring-Beans.xsd
       http://www.Springframework.org/schema/context
       http://www.Springframework.org/schema/context/Spring-context.xsd
       http://www.Springframework.org/schema/aop
       http://www.Springframework.org/schema/aop/Spring-aop.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--
        基于注解的 AOP 的实现：
        1、将目标对象和切面交给 XML 容器管理（注解 + 扫描）
        2、开启 AspectJ 的自动代理，为目标对象自动生成代理
        3、将切面类通过注解 @Aspect 标识
    --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.youngkbt.aop.annotation<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">context:</span>component-scan</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>aspectj-autoproxy</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Beans</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>执行测试：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CalculatorTest</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">CalculatorTest</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testAdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">ApplicationContext</span> ac <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">&quot;Beans.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Calculator</span> calculator <span class="token operator">=</span> ac<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span> <span class="token class-name">Calculator</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> add <span class="token operator">=</span> calculator<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;执行成功:&quot;</span><span class="token operator">+</span>add<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>执行结果：</p> <p><img src="https://cdn.jsdelivr.net/gh/Kele-Bingtang/static/img/Spring6/20231028000128.png" alt="image-20221102155523983"></p> <h3 id="各种通知"><a href="#各种通知" class="header-anchor">#</a> 各种通知</h3> <ul><li>前置通知：使用 <code>@Before</code> 注解标识，在被代理的目标方法 <strong>前</strong> 执行</li> <li>返回通知：使用 <code>@AfterReturning</code> 注解标识，在被代理的目标方法 <strong>成功结束</strong> 后执行（<strong>寿终正寝</strong>）</li> <li>异常通知：使用 <code>@AfterThrowing</code> 注解标识，在被代理的目标方法 <strong>异常结束</strong> 后执行（<strong>死于非命</strong>）</li> <li>后置通知：使用 <code>@After</code> 注解标识，在被代理的目标方法 <strong>最终结束</strong> 后执行（<strong>盖棺定论</strong>）</li> <li>环绕通知：使用 <code>@Around</code> 注解标识，使用 <code>try...catch...finally</code> 结构围绕 <strong>整个</strong> 被代理的目标方法，包括上面四种通知对应的所有位置</li></ul> <p>各种通知的执行顺序：</p> <ul><li>Spring 版本 5.3.x 以前：
<ul><li>前置通知</li> <li>目标操作</li> <li>后置通知</li> <li>返回通知或异常通知</li></ul></li> <li>Spring 版本 5.3.x 以后：
<ul><li>前置通知</li> <li>目标操作</li> <li>返回通知或异常通知</li> <li>后置通知</li></ul></li></ul> <h3 id="切入点表达式语法"><a href="#切入点表达式语法" class="header-anchor">#</a> 切入点表达式语法</h3> <blockquote><p>作用</p></blockquote> <p><img src="https://cdn.jsdelivr.net/gh/Kele-Bingtang/static/img/Spring6/20231028000130.png" alt="images"></p> <blockquote><p>语法细节</p></blockquote> <ul><li><p>用 <code>*</code> 号代替「权限修饰符」和「返回值」部分表示「权限修饰符」和「返回值」不限</p></li> <li><p>在包名的部分，一个 <code>*</code> 号只能代表包的层次结构中的一层，表示这一层是任意的</p> <ul><li>例如：<code>*.Hello</code> 匹配 <code>com.Hello</code>，不匹配 <code>cn.youngkbt.Hello</code></li></ul></li> <li><p>在包名的部分，使用「*..」表示包名任意、包的层次深度任意</p></li> <li><p>在类名的部分，类名部分整体用 <code>*</code> 号代替，表示类名任意</p></li> <li><p>在类名的部分，可以使用 <code>*</code> 号代替类名的一部分</p> <ul><li>例如：<code>*Service</code> 匹配所有名称以 Service 结尾的类或接口</li></ul></li> <li><p>在方法名部分，可以使用 <code>*</code> 号表示方法名任意</p></li> <li><p>在方法名部分，可以使用 <code>*</code> 号代替方法名的一部分</p> <ul><li>例如：<code>*Operation</code> 匹配所有方法名以 Operation 结尾的方法</li></ul></li> <li><p>在方法参数列表部分，使用 <code>(..)</code> 表示参数列表任意</p></li> <li><p>在方法参数列表部分，使用 <code>(int，..)</code> 表示参数列表以一个 int 类型的参数开头</p></li> <li><p>在方法参数列表部分，基本数据类型和对应的包装类型是不一样的</p> <ul><li>切入点表达式中使用 int 和实际方法中 Integer 是不匹配的</li></ul></li> <li><p>在方法返回值部分，如果想要明确指定一个返回值类型，那么必须同时写明权限修饰符</p> <ul><li>例如：<code>execution(public int *..*Service.*(..， int))</code> 正确
例如：<code>execution(* int *..*Service.*(..， int))</code> 错误</li></ul></li></ul> <p><img src="https://cdn.jsdelivr.net/gh/Kele-Bingtang/static/img/Spring6/20231028000724.png" alt="images"></p> <h3 id="重用切入点表达式"><a href="#重用切入点表达式" class="header-anchor">#</a> 重用切入点表达式</h3> <p>声明</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* cn.youngkbt.aop.annotation.*.*(..))&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pointCut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>在同一个切面中使用</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">&quot;pointCut()&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">beforeMethod</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">String</span> methodName <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> args <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>joinPoint<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Logger--&gt;前置通知，方法名：&quot;</span><span class="token operator">+</span>methodName<span class="token operator">+</span><span class="token string">&quot;，参数：&quot;</span><span class="token operator">+</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>在不同切面中使用</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">&quot;cn.youngkbt.aop.CommonPointCut.pointCut()&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">beforeMethod</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">String</span> methodName <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> args <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>joinPoint<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Logger--&gt;前置通知，方法名：&quot;</span><span class="token operator">+</span>methodName<span class="token operator">+</span><span class="token string">&quot;，参数：&quot;</span><span class="token operator">+</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="获取通知的相关信息"><a href="#获取通知的相关信息" class="header-anchor">#</a> 获取通知的相关信息</h3> <blockquote><p>获取连接点信息</p></blockquote> <p>获取连接点信息可以在通知方法的参数位置设置 JoinPoint 类型的形参</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">&quot;execution(public int cn.youngkbt.aop.annotation.CalculatorImpl.*(..))&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">beforeMethod</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//获取连接点的签名信息</span>
    <span class="token class-name">String</span> methodName <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//获取目标方法到的实参信息</span>
    <span class="token class-name">String</span> args <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>joinPoint<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Logger--&gt;前置通知，方法名：&quot;</span><span class="token operator">+</span>methodName<span class="token operator">+</span><span class="token string">&quot;，参数：&quot;</span><span class="token operator">+</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p>获取目标方法的返回值</p></blockquote> <p><code>@AfterReturning</code> 中的属性 returning，用来将通知方法的某个形参，接收目标方法的返回值</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@AfterReturning</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;execution(* cn.youngkbt.aop.annotation.CalculatorImpl.*(..))&quot;</span><span class="token punctuation">,</span> returning <span class="token operator">=</span> <span class="token string">&quot;result&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterReturningMethod</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">,</span> <span class="token class-name">Object</span> result<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">String</span> methodName <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Logger--&gt;返回通知，方法名：&quot;</span><span class="token operator">+</span>methodName<span class="token operator">+</span><span class="token string">&quot;，结果：&quot;</span><span class="token operator">+</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>获取目标方法的异常</p></blockquote> <p><code>@AfterThrowing</code> 中的属性 throwing，用来将通知方法的某个形参，接收目标方法的异常</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@AfterThrowing</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;execution(* cn.youngkbt.aop.annotation.CalculatorImpl.*(..))&quot;</span><span class="token punctuation">,</span> throwing <span class="token operator">=</span> <span class="token string">&quot;ex&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterThrowingMethod</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">,</span> <span class="token class-name">Throwable</span> ex<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">String</span> methodName <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Logger--&gt;异常通知，方法名：&quot;</span><span class="token operator">+</span>methodName<span class="token operator">+</span><span class="token string">&quot;，异常：&quot;</span><span class="token operator">+</span>ex<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="环绕通知"><a href="#环绕通知" class="header-anchor">#</a> 环绕通知</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* cn.youngkbt.aop.annotation.CalculatorImpl.*(..))&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">aroundMethod</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> joinPoint<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">String</span> methodName <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> args <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>joinPoint<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Object</span> result <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;环绕通知--&gt;目标对象方法执行之前&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 目标方法的执行，目标方法的返回值一定要返回给外界调用者</span>
        result <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;环绕通知--&gt;目标对象方法返回值之后&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> throwable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        throwable<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;环绕通知--&gt;目标对象方法出现异常时&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;环绕通知--&gt;目标对象方法执行完毕&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="切面的优先级"><a href="#切面的优先级" class="header-anchor">#</a> 切面的优先级</h3> <p>相同目标方法上同时存在多个切面时，切面的优先级控制切面的 <strong>内外嵌套</strong> 顺序。</p> <ul><li>优先级高的切面：外面</li> <li>优先级低的切面：里面</li></ul> <p>使用 <code>@Order</code> 注解可以控制切面的优先级：</p> <ul><li><code>@Order</code>（较小的数）：优先级高</li> <li><code>@Order</code>（较大的数）：优先级低</li></ul> <p><img src="https://cdn.jsdelivr.net/gh/Kele-Bingtang/static/img/Spring6/20231028000133.png" alt="images"></p> <h2 id="基于xml的aop"><a href="#基于xml的aop" class="header-anchor">#</a> 基于XML的AOP</h2> <h3 id="准备工作-2"><a href="#准备工作-2" class="header-anchor">#</a> 准备工作</h3> <p>参考基于注解的 AOP 环境</p> <h3 id="实现"><a href="#实现" class="header-anchor">#</a> 实现</h3> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.youngkbt.aop.xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">context:</span>component-scan</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 配置切面类 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>aspect</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>loggerAspect<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>pointcut</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pointCut<span class="token punctuation">&quot;</span></span> 
                   <span class="token attr-name">expression</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>execution(* cn.youngkbt.aop.xml.CalculatorImpl.*(..))<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>before</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>beforeMethod<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pointCut<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>before</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>after</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>afterMethod<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pointCut<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>after</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>after-returning</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>afterReturningMethod<span class="token punctuation">&quot;</span></span> <span class="token attr-name">returning</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>result<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pointCut<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>after-returning</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>after-throwing</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>afterThrowingMethod<span class="token punctuation">&quot;</span></span> <span class="token attr-name">throwing</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ex<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pointCut<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>after-throwing</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>around</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>aroundMethod<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pointCut<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>around</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>aspect</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></div></div> <!----> <div class="page-edit"><!----> <div class="tags"><a href="/tags/?tag=Spring6" title="标签">#Spring6</a></div> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">2024/01/17, 05:48:13</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/spring6/handwriting-container/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Spring6 - 手写容器</div></a> <a href="/spring6/junit/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Spring6 - Junit</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/spring6/handwriting-container/" class="prev">Spring6 - 手写容器</a></span> <span class="next"><a href="/spring6/junit/">Spring6 - Junit</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/e5a304/"><div>
            JVM调优
            <!----></div></a> <span class="date">12-10</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/578cf2/"><div>
            jenkins
            <!----></div></a> <span class="date">12-10</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/b6e7a0/"><div>
            Arthas
            <!----></div></a> <span class="date">12-10</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="https://github.com/micolor" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://gitee.com/micolor" title="Gitee" target="_blank" class="iconfont icon-gitee"></a><a href="https://www.niubook.xom" title="网站首页" target="_blank" class="iconfont icon-rss"></a><a href="http://wpa.qq.com/msgrd?v=3&amp;uin=349462253&amp;site=qq&amp;menu=yes" title="QQ" target="_blank" class="iconfont icon-QQ"></a><a href="https://www.niubook.com/?contact=true" title="联系我" target="_blank" class="iconfont icon-youjian"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2021-2024
    <span>KNOTE  | blog</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><div></div><!----><canvas id="vuepress-canvas-cursor"></canvas></div></div>
    <script src="/assets/js/app.be13efeb.js" defer></script><script src="/assets/js/2.6721fee8.js" defer></script><script src="/assets/js/236.48827a8e.js" defer></script><script src="/assets/js/4.7df05356.js" defer></script>
  </body>
</html>
